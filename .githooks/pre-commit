#!/bin/bash
set -e

echo "Running pre-commit checks..."
echo

echo "ğŸ“ Checking formatting..."
cargo fmt --check
echo "   âœ“ Formatting OK"
echo

echo "ğŸ”¨ Building..."
cargo build --all-targets 2>&1 | grep -E "^error" && exit 1 || true
echo "   âœ“ Build OK"
echo

echo "ğŸ” Running clippy (no warnings, no dead code)..."
cargo clippy --all-targets --all-features -- -D warnings -D dead_code
echo "   âœ“ Clippy OK"
echo

echo "ğŸ§ª Running tests..."
cargo test --quiet
echo "   âœ“ Tests OK"
echo

echo "âœ… All checks passed!"
